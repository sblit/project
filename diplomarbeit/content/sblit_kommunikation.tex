Sblit verwendet zur Kommunikation f√ºnf verschiedene Nachrichten:
\begin{itemize}
	\item Authentifizierungssanfrage
	\item Antwort auf eine Authentifizierungssanfrage
	\item Dateianfragen
	\item Antwort auf eine Dateianfrage
	\item Die eigentliche √úbertragung der Datei
\end{itemize}
\subsubsection*{Authentifizierungssanfrage}
<<<<<<< HEAD
Angenommen zwei Ger‰te eines Besitzers wollen Daten austauschen. Wie kˆnnen sich diese sicher sein, dass es sich auch um das richtige Ger‰t handelt? Hier kommt die Authentizierung ins Spiel. Authentizit‰tsanfragen dienen zur Sicherstellung der Authentizit‰t des Ger‰tes (im Folgenden Ger‰t A), mit dem ein anderes Ger‰t (im Folgenden Ger‰t B) eine Verbindung aufbaut. Dazu schickt das Ger‰t B zuf‰llige Daten an Ger‰t A mit der Aufforderung, diese zu verschl¸sseln. Die Gesamtl‰nge der Daten, die mit RSA-2048 verschl¸sselt werden, darf maximal 128 Byte lang sein. Um Ger‰t A 64 Byte zur Verf¸gung zu stellen, betr‰gt die L‰nge der von Ger‰t B gesendeten Daten 64 Byte. Diese 64 Byte werden von Ger‰t A benˆtigt, um zu verhindern, dass Ger‰t B sich gew¸nschte Werte von Ger‰t A verschl¸sseln l‰sst.

\subsubsection*{Antwort auf eine Authentifizierungssanfrage}
Bevor die Daten wieder zur¸ckgeschickt werden, m¸ssen diese von Ger‰t B verschl¸sselt werden. Dies geschieht mit dem Private-Key des eben genannten Ger‰tes. Dabei wird vorher noch ein zuf‰lliger Wert an die empfangenen Daten angef¸gt, um das unter Authentifizierungsanfragen beschriebene Problem zu lˆsen.
Wird dieses Paket nun von Ger‰t B empfangen, kann der Inhalt mit dem Public-Key des Ger‰tes A, also dessen Adresse, entschl¸sselt werden. Von den erhaltenen Daten werden die 64 Byte am Beginn mit den urspr¸nglich gesendeten 64 Byte verglichen. Stimmen die beiden Werte ¸berein, kann das Ger‰t seine Authentizit‰t beweisen. Stimmen diese jedoch nicht ¸berein, handelt es sich um einen Betr¸ger, der offensichtlich den richtigen Private-Key zur vorget‰uschten Adresse nicht kennt.

\subsubsection*{Dateianfrage}
Bevor eine Datei an ein anderes Ger‰t (im Folgenden Ger‰t B) verschickt wird, schickt das Ger‰t, das die Datei besitzt (im Folgenden Ger‰t A), eine Dateianfrage an das Ger‰t B. Dies hat 2 Gr¸nde: Erstens muss eruiert werden, ob die Datei ¸berhaupt von Ger‰t B benˆtigt wird, oder ob besagtes Ger‰t schon diese Datei besitzt. Zweitens besteht die Mˆglichkeit eines Konfliktes. Eine n‰here Erkl‰rung zu Konflikten finden Sie im Kapitel \nameref{Konflikt} auf Seite \pageref{Konflikt}. Daher werden sowohl der zu Sblits Hauptordner relative Dateipfad, als auch ein Versionsverlauf mit allen Hashes der Datei seit der letzten Version, die auf allen Ger‰ten verteilt war, an das Ger‰t B versendet. 

\subsubsection*{Antwort auf eine Dateianfrage}
Die Antwort auf eine Dateianfrage beinhaltet den Pfad der Datei, ein Feld in dem steht, ob die Datei benˆtigt wird und den letzten Hashwert in der Dateianfrage. Nach Empfang der Dateianfrage wird zun‰chst gepr¸ft, ob die Datei vorhanden und in der aktuellsten Version ist.  Ist die lokale Datei nicht aktuell, wird das Feld, in dem steht, ob das File benˆtigt wird, auf den Hexadezimalwert 0x01 gesetzt. Ist die Datei auf dem aktuellsten Stand, wird besagtes Feld auf den Hexadezimalwert 0x00 gesetzt. Auﬂerdem wird ¸berpr¸ft, ob ein Konflikt aufgetreten ist. Die Konflikterkennung finden Sie im Kapitel \nameref{Konflikterkennung} auf der Seite \pageref{Konflikterkennung}.
Nach Empfang der Antwort wird zun‰chst ¸berpr¸ft, ob die Datei benˆtigt wird. Auﬂerdem wird zus‰tzlich ¸berpr¸ft, ob der Hashwert der Datei mit dem erhaltenen Pfad ¸bereinstimmt. Stimmt der Hashwert in der Anfrage nicht mit dem aktuellen Hashwert ¸berein, wird die Antwort verworfen. Stimmt dieser jedoch ¸berein kann die Datei nun im n‰chsten Schritt verschickt werden.

\subsubsection*{Die eigentliche ‹bertragung der Datei}
Bei der eigentlichen ‹bertragung der Datei werden folgenden Daten mit der Datei mitgesendet: die Ger‰te, auf denen die neuste Version schon vorhanden ist, der Pfad, in dem die Datei gespeichert ist und der Hash der aktuellen Datei. Um einem Ger‰t, das die neuste Version schon besitzt keine unnˆtige Dateianfrage zu schicken, werden die Ger‰te, die diese Version schon besitzen, ebenfalls mit einer Datei mitgeschickt. Der Pfad wird mitgeschickt, um die Datei auf dem zu synchronisierenden Ger‰t am gleichen relativen Ort zu speichern, wie auf dem Ger‰t, von dem die Datei kommt. Um sicherzustellen, dass die Datei auch so ankommt, wie sie verschickt wird, wird ein Hash der Datei mitgesendet. Verhasht man die Datei, muss das Ergebnis mit dem mitgeschickten Hash ¸bereinstimmen. Andernfalls entsteht ein ‹bertragungsfehler und die Datei muss neu gesendet werden.
=======
Authentizit√§tsanfragen dienen zur Sicherstellung der Authentizit√§t des Ger√§tes (im Folgenden Ger√§t A), mit dem ein anderes Ger√§t (im Folgenden Ger√§t B) eine Verbindung aufbaut. Dazu schickt das Ger√§t B zuf√§llige Daten an Ger√§t A mit der Aufforderung, diese zu verschl√ºsseln. Die L√§nge der gesendeten Daten betr√§gt dabei 64 Byte, um Ger√§t A weitere 64 Byte zur Verf√ºgung zu stellen, um zu verhindern, dass Ger√§t B sich einen bestimmten Wert von Ger√§t A verschl√ºsseln l√§sst.

\subsubsection*{Antwort auf eine Authentifizierungssanfrage}
Bevor die Daten wieder zur√ºckgeschickt werden, m√ºssen diese von Ger√§t B verschl√ºsselt werden. Dies geschieht mit dem Private-Key des eben genannten Ger√§tes. Dabei wird vorher noch ein zuf√§lliger Wert an die empfangenen Daten angef√ºgt, um das unter Authentifizierungssanfragen beschriebene Problem zu l√∂sen.
Wird dieses Paket nun von Ger√§t B empfangen, kann der Inhalt mit dem Public-Key des Ger√§tes A, also dessen Adresse, entschl√ºsselt werden. Hierbei werden die 64 Byte am Anfang der erhaltenen Daten mit den urspr√ºnglich gesendeten 64 Byte verglichen. Stimmen die beiden Werte √ºberein, konnte das Ger√§t seine Authentizit√§t beweisen. Stimmen diese jedoch nicht √ºberein, handelt es sich um einen Betr√ºger, der offensichtlich den richtigen Private-Key zu seiner Adresse nicht kennt.

\subsubsection*{Dateianfrage}
Bevor eine Datei an ein Ger√§t verschickt wird, schickt das Ger√§t, das die Datei besitzt (im Folgenden Ger√§t A) eine Dateianfrage an ein anderes Ger√§t (im Folgenden Ger√§t B). Dies hat 2 Gr√ºnde: Erstens muss eruiert werden, ob die Datei √ºberhaupt von Ger√§t B ben√∂tigt wird, oder ob besagtes Ger√§t schon diese Datei besitzt. Zweitens ist die M√∂glichkeit eine Konfliktes gegeben. Eine n√§here Erkl√§rung zu Konflikten finden Sie im Kapitel \nameref{Konflikt} auf Seite \pageref{Konflikt}. Daher werden sowohl der zu Sblits Hauptordner relative Dateipfad, als auch ein Versionsverlauf mit allen Hashes der Datei seit der letzten Version, die auf allen Ger√§ten verteilt war, an das Ger√§t B versendet. 

\subsubsection*{Antwort auf eine Dateianfrage}
Die Antwort auf eine Dateianfrage beinhaltet den Pfad der Datei, ob die Datei ben√∂tigt wird [-> anders formulieren] und den letzten Hashwert in der Dateianfrage. Nach Empfang der Dateianfrage wird zun√§chst gepr√ºft, ob die Datei vorhanden und auf der aktuellsten Version bzw. ob ein Konflikt aufgetreten ist. Die Konflikterkennung finden Sie im Kapitel \nameref{Konflikterkennung} auf der Seite \pageref{Konflikterkennung}. Ist die lokale Datei nicht aktuell, wird das Feld, in dem steht, ob das File ben√∂tigt wird, auf den Hexadezimalwert 0x01 gesetzt. Ist die Datei auf dem aktuellsten Stand, wird besagtes Feld auf den Hexadezimalwert 0x00 gesetzt. 
Nach Empfang der Antwort wird zun√§chst √ºberpr√ºft, ob die Datei ben√∂tigt wird. Au√üerdem wird zus√§tzlich √ºberpr√ºft, ob der Hashwert der Datei mit dem erhaltenen Pfad √ºbereinstimmt. Stimmt der Hashwert in der Anfrage nicht mit dem aktuellen Hashwert √ºberein, wird die Antwort verworfen. Stimmt dieser jedoch √ºberein kann die Datei nun im n√§chsten Schritt verschickt werden.

\subsubsection*{Die eigentliche √úbertragung der Datei}
Bei der eigentlichen √úbertragung der Datei werden folgenden Daten mit der Datei mitgesendet:
>>>>>>> 0264c2515d7bf000d431711e6614a0add6e101e5
